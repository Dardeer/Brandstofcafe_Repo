@page "/"
@using NHL_Brandstofcafe.Models
@using NHL_Brandstofcafe.Services
@using System.Linq
@inject NHL_Brandstofcafe.Services.IBrandstofcafeDataService DataService

<PageTitle>Home</PageTitle>
<h1 class="text-center">Welkom bij Brandstofcafé</h1>

@code {
    private List<Sectie>? _secties;
    private int? _geselecteerdeSectieId; // Houde de ID van de geselecteerde sectie bij

    protected override async Task OnInitializedAsync()
    {
        _secties = await DataService.GetSectiesAsync();
    }
    private void SelecteerSectie (int sectieId)
    {
        _geselecteerdeSectieId = sectieId;
        Console.WriteLine($"Sectie geselecteerd: ID {sectieId}"); // Tijdelijk voor debugging
        StateHasChanged();
    }
}

@if (_secties == null) {
    <p><em>Laden van Secties ..</em></p>  // Bericht terwijl Data laadt
}

else if (! _secties.Any()) {    //of de lijst leeg is (vai Systeem.Linq)
    <p> Er Zijn momenteel geen secties beschikbaar in het Brandstofcafe</p>
}
else
{
    <h2>Beschikbare Secties:</h2>
    <ul class="list-group">
        @foreach (var sectie in _secties)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center
                @(sectie.Id == _geselecteerdeSectieId ? "active" : "") cursor-pointer"  @* C# Ternary operator (inline if-statment) *@
                @onclick="() => SelecteerSectie(sectie.Id)">
                @sectie.Naam
                <span class="badge bg-primary rounded-pill">ID: @sectie.Id</span>
            </li>
        }
    </ul>
    @* . . . TEST DOELEINDEN . . . *@
    @if (_geselecteerdeSectieId.HasValue)
    {
        <p class="mt-3"> Geselecteerde Sectie Id: @_geselecteerdeSectieId</p>
    }
}